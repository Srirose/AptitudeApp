<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar Chart Quiz - AptiMize</title>
    <style>
        body {
            background-color: #4B0082;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .quiz-container {
            width: 600px;
            background: white;
            color: black;
            padding: 20px;
            margin: auto;
            margin-top: 50px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .chart-img {
            width: 100%;
            max-height: 300px;
        }

        #options button {
            width: 100%;
            padding: 10px;
            margin: 5px;
            background: #4B0082;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }

        #options button:hover {
            background: #e50b0b;
        }

        #score, #time {
            display: none;
            margin-top: 20px;
            font-size: 18px;
        }

        #submit-btn {
            display: none;
            padding: 10px 20px;
            font-size: 16px;
            background: #4B0082;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }

        #submit-btn:hover {
            background: #e50b0b;
        }
        @keyframes bounce {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
        }

        button {
            transition: all 0.3s ease-in-out;
        }

        button:active {
            animation: bounce 0.3s ease-in-out;
        }
        .popper {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #ffcc00;
        color: black;
        padding: 20px;
        font-size: 18px;
        font-weight: bold;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        animation: popperAnimation 1s ease-in-out;
    }

    @keyframes popperAnimation {
        0% { transform: scale(0); opacity: 0; }
        50% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
    }

    </style>
</head>
<body>

    <div class="quiz-container">
        <h2>Bar Chart Aptitude Quiz</h2>
        <img id="chart-image" class="chart-img" src="" alt="Bar Chart Image">
        <h3 id="question-text">Loading...</h3>
        
        <div id="options"></div>

        <button id="submit-btn" onclick="nextQuestion()">Next</button>

        <div id="score">
            <h3>Score: <span id="score-value">0</span></h3>
        </div>

        <div id="time">
            <h3>Time Taken: <span id="time-value">0</span> seconds</h3>
        </div>
        <div id="popper" class="popper">
            üéâ Congratulations! You scored full marks! üéâ
        </div>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.1/dist/confetti.browser.min.js"></script>
        
    </div>
    
    

    <script>
        let currentQuestionIndex = 0;
        let score = 0;
        let startTime = Date.now();
        let selectedAnswer = null;

        let questions = [
        { 
                img: "barimg1.png",
                question: "1) In which year did X have the highest production?",
                options: ["1996", "1997", "1999", "2000"], 
                answer: "1999" 
            },
            { 
                img: "barimg1.png",
                question: "2) What was the approximate total production in 1998?",
                options: ["100 lakh tons", "90 lakh tons", "110 lakh tons", "80 lakh tons"], 
                answer: "90 lakh tons" 
            },
            { 
                img: "barimg2.png",
                question: "3) In which year did CET applications increase the most?",
                options: ["2000", "2001", "2002", "They remained constant"], 
                answer: "2002" 
            },
            { 
                img: "barimg2.png",
                question: "4) What was the total number of applications in 2001?",
                options: ["160", "170", "180", "190"], 
                answer: "170" 
            },
            { 
                img: "barimg3.png",
                question: "5) In which academic year was the highest number of students enrolled?",
                options: ["1993-94", "1996-97", "1997-98", "1998-99"], 
                answer: "1997-98" 
            },
            { 
                img: "barimg3.png",
                question: "6) How many students were enrolled in 1994-95?",
                options: ["2520", "3360", "3120", "2640"], 
                answer: "3360" 
            },
            { 
                img: "barimg4.png",
                question: "7) In which year were the most lipsticks sold?",
                options: ["1995", "2000", "Both years were equal", "None of these"], 
                answer: "2000" 
            },
            { 
                img: "barimg4.png",
                question: "8) By how much did the sale of nail enamels increase between 1995 and 2000?",
                options: ["20 lakh", "30 lakh", "31.83 lakh", "35 lakh"], 
                answer: "31.83 lakh" 
            },
            { 
                img: "barimg1.png",
                question: "9) Which product (X, Y, Z) had the lowest production in 1997?",
                options: ["X", "Y", "Z", "Same for all"], 
                answer: "Y" 
            },
            { 
                img: "barimg2.png",
                question: "10) In 2002, which entrance exam had the least applicants?",
                options: ["CAT", "XAT", "CET", "None"], 
                answer: "CAT" 
            },
            { 
                img: "barimg3.png",
                question: "11) In which year did student enrollment decline compared to the previous year?",
                options: ["1993-94", "1995-96", "1998-99", "1996-97"], 
                answer: "1998-99" 
            },
            { 
                img: "barimg4.png",
                question: "12) Which product had the least sales in 2000?",
                options: ["Shampoos", "Conditioners", "Nail Enamels", "Talcum Powder"], 
                answer: "Conditioners" 
            },
            { 
                img: "barimg1.png",
                question: "13) What was the total production of Y in all years combined?",
                options: ["170 lakh tons", "180 lakh tons", "190 lakh tons", "200 lakh tons"], 
                answer: "190 lakh tons" 
            },
            { 
                img: "barimg2.png",
                question: "14) How much did the total number of applicants increase from 2000 to 2002?",
                options: ["30", "35", "40", "45"], 
                answer: "40" 
            },
            { 
                img: "barimg3.png",
                question: "15) What was the total student enrollment in 1996-97 and 1997-98 combined?",
                options: ["9360", "10820", "11460", "12100"], 
                answer: "9360" 
            },
            { 
                img: "barimg4.png",
                question: "16) How many more lipsticks were sold in 2000 compared to 1995?",
                options: ["10 lakh", "15 lakh", "28 lakh", "25 lakh"], 
                answer: "28 lakh" 
            },
            { 
                img: "barimg1.png",
                question: "17) What is the difference between the highest and lowest production years for Z?",
                options: ["5 lakh tons", "10 lakh tons", "15 lakh tons", "20 lakh tons"], 
                answer: "10 lakh tons" 
            },
            { 
                img: "barimg2.png",
                question: "18) Which entrance exam had the highest applicants in 2001?",
                options: ["CAT", "XAT", "CET", "None"], 
                answer: "CET" 
            },
            { 
                img: "barimg3.png",
                question: "19) What is the percentage increase in student enrollment from 1991-92 to 1997-98?",
                options: ["50%", "75%", "90%", "100%"], 
                answer: "90%" 
            },
            { 
                img: "barimg4.png",
                question: "20) What was the average sales of all products in 1995?",
                options: ["10 lakh", "15 lakh", "20 lakh", "25 lakh"], 
                answer: "15 lakh" 
            }
        ];

        function loadQuestion() {
            let q = questions[currentQuestionIndex];
            document.getElementById("chart-image").src = q.img;
            document.getElementById("question-text").textContent = q.question;

            let optionsContainer = document.getElementById("options");
            optionsContainer.innerHTML = ""; // Clear previous options

            q.options.forEach(option => {
                let button = document.createElement("button");
                button.textContent = option;
                button.onclick = function () { selectAnswer(option, button); };
                optionsContainer.appendChild(button);
            });

            document.getElementById("submit-btn").style.display = "block";
        }

        function selectAnswer(option, button) {
            selectedAnswer = option;
            let allButtons = document.querySelectorAll("#options button");
            
            // Reset styles before applying new ones
            allButtons.forEach(btn => {
                btn.style.background = "#4B0082";
                btn.textContent = btn.textContent.replace(/‚úÖ|üéâ|‚ùå|üòû|üò¢/g, ""); // Remove old emoji
            });

            let q = questions[currentQuestionIndex];

            if (option === q.answer) {
                button.style.background = "green"; // Right Answer: Green
                button.textContent += " üéâ‚úÖ"; // Add joyful emoji
            } else {
                button.style.background = "red"; // Wrong Answer: Red
                button.textContent += " ‚ùåüò¢"; // Add sad emoji
            }
        }


        function nextQuestion() {
            if (selectedAnswer === null) {
                alert("Please select an answer before proceeding!");
                return;
            }

            let q = questions[currentQuestionIndex];
            if (selectedAnswer === q.answer) {
                score++;
            }
            selectedAnswer = null; 
            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function startConfetti() {
            const duration = 3 * 1000; // Confetti duration (3 seconds)
            const end = Date.now() + duration;
            const colors = ["#bb0000", "#ffffff", "#44ff00", "#0082ff"];

            function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: Math.random(), y: 0 },
                    colors: colors
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }

            frame();
        }



        function showResults() {
            let timeTaken = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById("score-value").textContent = score;
            document.getElementById("time-value").textContent = timeTaken;
            document.getElementById("score").style.display = "block";
            document.getElementById("time").style.display = "block";
            document.getElementById("submit-btn").style.display = "none";
            document.getElementById("options").innerHTML = "";
            document.getElementById("question-text").textContent = "Quiz Completed!";

            let userScores = JSON.parse(localStorage.getItem("userScores")) || {};
            userScores["Bar Chart"] = score; // Save Train quiz score
            localStorage.setItem("userScores", JSON.stringify(userScores));

            if (score === questions.length) {
            document.getElementById("popper").style.display = "block";
            setTimeout(() => { document.getElementById("popper").style.display = "none"; }, 3000);
            }

            setTimeout(() => {
                window.location.href = "scoreboard.html";
            }, 3000);
        }

        loadQuestion();
    </script>

</body>
</html>
